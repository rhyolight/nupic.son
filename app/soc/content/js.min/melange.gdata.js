(function(){if(window.melange===undefined){throw new Error("Melange not loaded")}var a=window.melange;a.gdata=window.melange.gdata=function(){return new a.gdata};var b=a.logging.debugDecorator(a.gdata);a.error.createErrors([]);var c={is_logged_in:false,popup_oauth_redirect_url:"",success_callback:null,success_callback_parameters:null};b.init=function(a,b){c.is_logged_in=a;c.popup_oauth_redirect_url=b};b.loginSuccessful=function(){c.is_logged_in=true;if(c.success_callback!==null){c.success_callback.apply(this,c.success_callback_parameters);c.success_callback=null;c.success_callback_parameters=null}};b.loginFunctionFactory=function(a,b){function d(){if(c.is_logged_in){a.apply(this,b)}else{c.success_callback=a;c.success_callback_parameters=b;var d=window.screen.availWidth;var e=window.screen.availHeight;var f=400;var g=500;var h=(d-f)/2;var i=(e-g)/2;window.open(c.popup_oauth_redirect_url,"popup",["width=",f,",","height=",g,",","top=",i,",","left=",h].join(""))}}return d}})()
