(function(a){a.fn.dynamicoptions=function(h){var b=a.extend({},h);return this.each(function(){var g=function(d){var c="";c+='<div class="options">';c+='<a href="#" class="remove" title="X">X</a>';var e=0;a.each(b.fields,function(i){c+='<input type="text" name='+i+' class="tagfield" value="'+unescape(d!==undefined&&d.length>e?d[e]:"")+'" />';e+=1});c+="</div>";return c},f='<label class="form-label">'+b.label+"</label>";if(b.initial!==undefined&&b.initial!==""){var j=JSON.parse(b.initial);a.each(j,
function(d,c){f+=g(c)})}f+='<div class="add-area clearfix"><a id=add-'+b.id+' href="#" class="add">Add</a></div>';a(this).append(f);a(this).sortable({opacity:0.6,cursor:"move"});a(".options").live("hover",function(){a(this).css("cursor","move")},function(){a(this).css("cursor","auto")});a("#add-"+b.id).live("click",function(){a(this).parent().before(g());return false});a(".remove").live("click",function(){a(this).parent("div").animate({opacity:"hide",height:"hide",marginBottom:"0px"},"fast",function(){a(this).remove()});
return false})})}})(jQuery);
